<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/stylesheets/style.css">

    <title>Gozem - Results</title>
</head>

<body>
    <nav class="header">
        <a href="/dashboard" class="gozem">Gozem</a>
        <form class="lateral" action="/" method="GET">
            <input class="lat" type="text" name="itemname" placeholder="Introduce items name">
            <select class="lat" name="item">
                <option value="1" selected>Packages</option>
                <option value="2">Deliveries</option>
                <option value="3">Drivers</option>
                <option value="4">Clients</option>
            </select>
            <button class="lat" type="submit" name="submit">Search</button>
            <span><a href="/logout">Log Out</a></span>
        </form>
    </nav>
    <div class="packages-block">

        <% if(result.length>0){ %>
            <% if(item==1){ %>
                <table>
                    <tr>
                        <th>Package Name</th>
                        <th>Description</th>
                        <th>Package</th>
                        <th>Sender</th>
                        <th>Receiver</th>
                        <th>Operations</th>
                    </tr>
                    <% for (const [key, result] of Object.entries(result1)){ %>
                        <tr>
                            <td>
                                <%= result.name %>
                            </td>
                            <td>
                                <%-result.description %>
                            </td>
                            <td>
                                <select>
                                <option selected>Package</option>
                                <option value="">Weight: <%= result.weight %> </option>
                                <option value="">Width: <%= result.width %> </option>
                                <option value="">Height: <%= result.height %> </option>
                                <option value="">Depth: <%= result.depth %> </option>
                            </select>
                            </td>
                            <td>
                                <select>
                                <option selected>Sender</option>
                                <option value="">Name: <%= result.from_name %> </option>
                                <option value="">Adreess: <%- result.from_address %> </option>
                                <option value="">Location: <%= result.from_location %> </option>
                            </select>
                            </td>
                            <td>
                                <select>
                                <option>Receiver</option>
                                <option value="">Name: <%= result.to_name %> </option>
                                <option value="">Adreess: <%- result.to_address %> </option>
                                <option value="">Location: <%= result.to_location %> </option>
                            </select>
                            </td>
                            <td>
                                <form action="/api/package/" method="DELETE" class="col">
                                    <button class="btn btn-primary" value="1" type="submit" name="delete"><i class="bi bi-trash-fill"></i></button>
                                    <input type="hidden" name="id" value="<%= result._id %> ">
                                </form>
                            </td>
                            <td>
                                <form action="/package/update" method="GET" class="col">
                                    <button value="1" class="btn btn-primary" type="submit" name="update"><i class="bi bi-arrow-clockwise"></i></button>
                                    <input type="hidden" name="id" value="<%= result._id %> ">
                                </form>
                            </td>
                        </tr>
                        <% }%>

                </table>
                <% } %>
                    <% if(item==2){ %>
                        <table>
                            <tr>
                                <th>Delivery Name</th>
                                <th>Times</th>
                                <th>Status</th>
                                <th>Time to deliver</th>
                            </tr>
                            <% for (const [key, result] of Object.entries(result2)){ %>
                                <tr>
                                    <td></td>
                                    <td>
                                        <select name="" id="">
                                            <option value="">Pick Up: <%= result.pick_up %> </option>
                                            <option value="start_time">Start Time: <%= result.start_time %> </option>
                                            <option value="">End Time: <%= result.end_time %> </option>
                                        </select>
                                    </td>
                                    <td>
                                        <%= result.status %>
                                    </td>
                                </tr>
                                <% }%>

                        </table>
                        <% } %>
                            <% if(item==3){ %>
                                <table>
                                    <tr>
                                        <th>Username</th>
                                        <th>Name</th>
                                        <th>Surname</th>
                                        <th>Email</th>
                                        <th>Address</th>
                                        <th>Closed Deliveries</th>
                                        <th>Operations</th>
                                    </tr>
                                    <% for (const [key, result] of Object.entries(result3)){ %>
                                        <tr>
                                            <td>
                                                <%= result.username %>
                                            </td>
                                            <td>
                                                <%= result.name %>
                                            </td>
                                            <td>
                                                <%= result.surname %>
                                            </td>
                                            <td>
                                                <%= result.email %>
                                            </td>
                                            <td>
                                                <%= result.address %>
                                            </td>
                                            <td>
                                                <%= result._id.slice(0,1) %>
                                            </td>

                                        </tr>

                                </table>
                                <% } %>
                                    <% if(item==4){ %>
                                        <table>
                                            <tr>
                                                <th>Username</th>
                                                <th>Name</th>
                                                <th>Surname</th>
                                                <th>Email</th>
                                                <th>Address</th>
                                                <th>Packages Created</th>
                                            </tr>
                                            <% for (const [key, result] of Object.entries(result4)){ %>
                                                <tr>
                                                    <td>
                                                        <%= result.username %>
                                                    </td>
                                                    <td>
                                                        <%= result.name %>
                                                    </td>
                                                    <td>
                                                        <%= result.surname %>
                                                    </td>
                                                    <td>
                                                        <%= result.email %>
                                                    </td>
                                                    <td>
                                                        <%= result.address %>
                                                    </td>
                                                    <td>
                                                        <%= result.address._id.slice(0,1) %>
                                                    </td>

                                                    <td>
                                                        <form action="/api/delivery/" method="DELETE" class="col">
                                                            <button class="btn btn-primary" value="1" type="submit" name="delete"><i class="bi bi-trash-fill"></i></button>
                                                            <input type="hidden" name="id" value="<%= result.id %> ">
                                                        </form>
                                                    </td>
                                                    <td>
                                                        <form action="/delivery/update" method="GET" class="col">
                                                            <button value="1" class="btn btn-primary" type="submit" name="update"><i class="bi bi-arrow-clockwise"></i></button>
                                                            <input type="hidden" name="id" value="<%= result.id %> ">
                                                        </form>
                                                    </td>
                                                </tr>
                                                <% } %>

                                        </table>
                                        <% } %>

                                            <% }else{ %>
                                                <p>There is no result for your search.</p>
                                                <% } %>
    </div>

</body>

</html>